<!DOCTYPE html5>
<html>
<head>
<script src="jquery-1.10.2.js"></script>
<script src="hogan-2.0.0.js"></script>
<script src="consistent.js"></script>
<script src="jquery.consistent.js"></script>
<style type="text/css">
p.world {
	background: pink;
}
</style>
</head>
<body>
<h1>Consistent.js</h1>

<p class="consistent" data-consistent-key="hello">My text changes.</p>
<input type="text" name="hello" value="hello world" class="consistent">
<textarea name="hello" class="consistent"></textarea>

<p class="consistent" data-consistent-attribute-class="hello">My text doesn't change but my class does.</p>

<!-- Templates -->
<p class="consistent" data-consistent-template="{{hello}} {{world}}">My text changes, using a template.</p>
<p class="consistent" data-consistent-template-attribute-class="{{hello}} {{world}}">My text doesn't change but my class does, using a template.</p>

<button id="action">Action</button>

<!-- Possible new configuration styles:

	Also allow specifying the configuration in Javascript when you do the binding, so you can take advantage of
	selectors.

<p class="consistent" data-cnst="innerHTML:hello, @class:hello, @class:'{{hello}}', bind-click:clickHandler">ok</p>
<input class="consistent" type="text" name="whatever" data-cnst="value:hello">
-->

<script>
$(function() {
	var myScope = $.consistent({ templateEngine: Hogan });
	myScope.hello = "world";
	myScope.world = "spoiler";

	$('.consistent').consistent(myScope);
	myScope.$.apply();

	$('#action').click(function() {
		myScope.hello = "cruel";
		myScope.$.apply();
	});

	myScope.$.watch("hello", function(key, value, oldValue) {
		if (value == "fade") {
			$(myScope.$.nodes()).fadeOut();
		} else {
			$(myScope.$.nodes()).fadeIn();
		}
	});
});

</script>

</body>
</html>
