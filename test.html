<!DOCTYPE html5>
<html>
<head>
<script src="jquery-1.10.2.js"></script>
<script src="hogan-2.0.0.js"></script>
<script src="consistent.js"></script>
<style type="text/css">
p.world {
	background: pink;
}
</style>
</head>
<body>
<h1>Consistent.js</h1>

<p class="consistent" data-consistent-key="hello">hello world</p>
<input type="text" name="hello" value="hello world" class="consistent">
<textarea name="hello" class="consistent"></textarea>
<p class="consistent" data-consistent-attribute-class="hello">hello world</p>
<p class="consistent" data-consistent-template="{{hello}} {{world}}">hello world</p>
<p class="consistent" data-consistent-template-attribute-class="{{hello}} {{world}}">hello world</p>

<button id="action">Action</button>

<script>
$(function() {
	var myScope = $.consistent("my scope", { templateEngine: Hogan });
	myScope.hello = "world";
	myScope.world = "spoiler";

	$('.consistent').consistent("my scope");
	$.consistent("my scope").apply();

	$('#action').click(function() {
		var scope = $.consistent("my scope");
		scope.hello = "cruel";
		scope.apply();
	});

	myScope.watch("hello", function(key, value, oldValue) {
		if (value == "fade") {
			$(myScope.nodes()).fadeOut();
		}
	});
});

</script>

</body>
</html>
