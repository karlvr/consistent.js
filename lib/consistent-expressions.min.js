/*!
 * Consistent.js Expressions 0.12.3
 * @author Karl von Randow
 * @license Apache License, Version 2.0
 */
(function(e,n){if(typeof Consistent==="undefined"){throw"Consistent must be included before consistent-expressions.js"}Consistent.expressionToFunction=function(e){var n=l(e);var t=a(n,false,e);try{return new Function("ctx",t)}catch(r){throw"Error compiling expression: "+e+" => "+t+" ("+r+")"}};Consistent.statementToFunction=function(e){var n=l(e);var t=a(n,true,e);try{return new Function("ctx",t)}catch(r){throw"Error compiling statements: "+e+" => "+t+" ("+r+")"}};var t=0;var r=1;var i=2;var u=3;var s=4;var o=5;var f=6;function l(e){var n=[];var l=0;var a=e.length;var c=t;var w="";while(l<a){var m=e.charAt(l);if(c===t){if(h(m)){c=r}else if(v(m)){c=s}else if(g(m)){c=i}else if(d(m)){c=u}else if(b(m)){c=o}else if(j(m)){c=f}else if(x(m)){throw"Illegal escape character at "+l+": "+e}else if(_(m)){l++;continue}else{throw"Invalid character '"+m+"' at "+l+": "+e}}else if(c===r){if(!p(m)){y();continue}}else if(c===i){if(!g(m)){y();continue}}else if(c===u){y();continue}else if(c===s){if(v(m)){w+=m;l++;y();continue}else if(x(m)){w+=m;l++;m=e.charAt(l)}}else if(c===o){if(!A(m)){y();continue}}else if(c===f){y();continue}w+=m;l++}function y(){if(w.length>0){if(c===r&&C(w)){var e=F(w);if(e!==null){n.push({type:i,text:e})}else{n.push({type:o,text:w})}}else{n.push({type:c,text:w})}}w="";c=t}y();return n}function a(e,n,t){var l=[];var h=[[]];var p=[[]];var v=0;var x,g=e.length;for(x=0;x<g;x++){var d=h[h.length-1];var w=p[p.length-1];var j=e[x];var b=j.type;if(b===r){if(n){var A=x+1<g?e[x+1]:null;if(A!==null&&A.type===i&&m(A.text)){d.push('ctx.set("'+c(j.text)+'", ');w.unshift(")");var _=y(A.text);if(_){d.push('ctx.get("'+c(j.text)+'")');d.push(_)}x++;continue}}d.push('ctx.get("'+c(j.text)+'")')}else if(b===i){if(m(j.text)){throw"Assignment is invalid in expression: "+t}else{d.push(j.text)}}else if(b===s||b===o){d.push(j.text)}else if(b===u){if(j.text==="("){h.push([]);p.push([])}else{if(!d.length||h.length<2){throw"Invalid bracketed expression in expression: "+t}l.push("var __group"+v+" = "+d.join(" ")+w.join(" ")+";");h.pop();p.pop();d=h[h.length-1];d.push("__group"+v);v++}}else if(b===f){if(n){d.push(p[0].join(" ")+";");p[0]=[];var C=a(e.slice(x+1),true,t);d.push(C);break}else{throw"Invalid multiple statements in expression: "+t}}}if(h.length!==1){throw"Unbalanced bracketed expressions in expression: "+t}return l.join(" ")+(x==g?" return ":"")+h[0].join(" ")+p[0].join(" ")+";"}function c(e){return e.replace(/"/g,'\\"')}function h(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"||e==="$"}function p(e){return h(e)||e==="."||e>="0"&&e<="9"}function v(e){return e==="'"||e==='"'}function x(e){return e==="\\"}function g(e){return e==="!"||e==="%"||e==="="||e==="<"||e===">"||e==="*"||e==="/"||e==="+"||e==="-"||e==="^"||e==="&"||e==="?"||e===":"}function d(e){return e==="("||e===")"}function w(e){return e==="="||e==="+="||e==="-="||e==="*="||e==="/="||e==="%="}function m(e){return w(e)||e==="++"||e==="--"}function y(e){if(e==="="){return null}else if(e.length==2&&e.indexOf("=")===1){return e.charAt(0)}else if(e==="++"){return"+1"}else if(e==="--"){return"-1"}else{throw"Unsupported mutation operator: "+e}}function j(e){return e===";"}function b(e){return e>="0"&&e<="9"}function A(e){return b(e)||e=="."}function _(e){return e<=" "}function C(e){return e==="true"||e==="false"||e==="null"||e==="undefined"||e==="and"||e==="or"||e==="not"||e==="lt"||e==="le"||e==="gt"||e==="ge"||e==="eq"||e==="ne"}function F(e){if(e==="and"){return"&&"}else if(e==="or"){return"||"}else if(e==="not"){return"!"}else if(e==="lt"){return"<"}else if(e==="le"){return"<="}else if(e==="gt"){return">"}else if(e==="ge"){return">="}else if(e==="eq"){return"=="}else if(e==="ne"){return"!="}else{return null}}})(window);
//# sourceMappingURL=consistent-expressions.min.js.map