/*!
 * Consistent.js Expressions 0.8.1
 * @author Karl von Randow
 * @license Apache License, Version 2.0
 */
!function(e,n){if(typeof Consistent==="undefined"){throw"Consistent must be included before consistent-expressions.js"}Consistent.expressionToFunction=function(e){var n=f(e);var t=o(n,e);try{return new Function("snapshot","ctx","return "+t+";")}catch(r){throw"Expression syntax error in expression: "+e+" => "+t+" ("+r+")"}};var t=0;var r=1;var i=2;var s=3;var u=4;function f(e){var n=[];var f=0;var o=e.length;var l=t;var C="";var b=false;while(f<o){var j=e.charAt(f);if(l===0){if(a(j)){l=r}else if(p(j)){l=s}else if(h(j)){l=i}else if(x(j)){l=u}else if(v(j)){b=true;f++;continue}else if(d(j)){f++;continue}else{throw"Invalid character in expression: "+j}}else if(l===r){if(!c(j)){m();continue}}else if(l===i){if(!h(j)){m();continue}}else if(l===s){if(p(j)){if(!b){C+=j;f++;m();continue}else{C+="\\"}}}else if(l===u){if(!y(j)){m();continue}}C+=j;f++}function m(){if(C.length>0){if(l===r&&g(C)){var e=w(C);if(e!==null){n.push({type:i,text:e})}else{n.push({type:u,text:C})}}else{n.push({type:l,text:C})}}C="";l=t}m();return n}function o(e,n){var t=[];var f="";var o,a=e.length;for(o=0;o<a;o++){var c=e[o];if(c.type===r){var p=o+1<a?e[o+1]:null;if(p!==null&&p.type===i&&p.text==="="){if(t.length>0){throw"Invalid assignment expression: "+n}t.push('ctx.setNestedProperty(snapshot, "'+l(c.text)+'",');f=");";o++}else{t.push('ctx.getNestedProperty(snapshot, "'+l(c.text)+'")')}}else if(c.type===i||c.type===s||c.type===u){t.push(c.text)}}return t.join(" ")+f}function l(e){return e.replace(/"/g,'\\"')}function a(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}function c(e){return a(e)||e==="."||e>="0"&&e<="9"}function p(e){return e==="'"||e==='"'}function v(e){return e==="\\"}function h(e){return e==="!"||e==="%"||e==="="||e==="<"||e===">"||e==="*"||e==="/"||e==="+"||e==="-"||e==="("||e===")"||e==="^"||e==="&"||e==="?"||e===":"}function x(e){return e>="0"&&e<="9"}function y(e){return x(e)||e=="."}function d(e){return e<=" "}function g(e){return e==="true"||e==="false"||e==="and"||e==="or"||e==="lt"||e==="le"||e==="gt"||e==="ge"||e==="eq"}function w(e){if(e==="and"){return"&&"}else if(e==="or"){return"||"}else if(e==="lt"){return"<"}else if(e==="le"){return"<="}else if(e==="gt"){return">"}else if(e==="ge"){return">="}else if(e==="eq"){return"=="}else{return null}}}(window);